# Just Another Homelab (JAH) - Web Server Monitoring

This homelab provides a virtual environment to practice with tools commonly used by Security Operations Center (SOC) teams to monitor, detect, manage, and investigate security incidents. The lab is specifically designed to monitor a Debian web server that is running vulnerable web servers. It utilizes security tools that are self-hosted on an Ubuntu Server to detect malicious activities that may be carried out using offensive tools in Kali Linux.

## Outline

1. [Diagrams](#diagram)
2. [Installation](#installation)

## Diagrams

The diagram below illustrates Kali Linux as the host machine hosting the virtual environment created with VirtualBox. This virtual environment includes an Ubuntu Server virtual machine equipped with security tools and a Debian virtual machine running the vulnerable web servers. The security tools will utilize APIs to communicate with external services such as VirusTotal and MISP. For those who prefer to use a different host machine such as Windows, instructions will be provided for running Kali Linux as a virtual machine.

<img src="images/jahws_diagram.png" title="Diagram"/>

The diagram below decipts the secuty solution that will be employed.

## Installation

For those who are particularly interested in cyber security analysis, you can download the VirtualBox `.OVA` files of the Ubuntu Server virtual machine containing the SOC tools and the Debian virtual machine with the vulnerable web servers pre-installed by clicking on the link provided below:

- [Download VirtualBox .OVA files](#)

For individuals interested in cyber security engineering, the following steps are provided for setting up the complete lab:

- Set up the virtual infrastructure in VirtualBox:
	- [Virtual Machines installation and configuration step-by-step.](./docs/jah_ws_vms.md)
- Install and configure the security tools on the Ubuntu Server virtual machine.
	- [Tools installation and configuration step-by-step.](./docs/jah_ws_tools.md)
- Install and configure the vulnerable web servers on the Debian virtual machine.
	- [Web servers installation and configuration step-by-step](#)

### Wazuh components

- **Wazuh Server**: The server manages the agents, configuring and updating them remotely when necessary. This component analyzes the data received from the agents, processing it through decoders and rules and using threat intelligence to look for indicators of compromise.
- **Wazuh Indexer**: The Wazuh indexer is a highly scalable full-text search and analysis engine. It is responsible for indexing and storing alerts generated by the Wazuh server. It can be installed as a single-node or multi-node cluster, depending on the environment needs.
- **Wazuh Dashboard**: A flexible and intuitive web interface for data mining, analysis, and visualization. The dashboard is used to manage the Wazuh configuration and monitor its status.
- **Wazuh Agent**: The Wazuh agent is a multi-platform component that runs on the endpoints to be monitored. It provides prevention, detection, and response capabilities.

### How Wazuh works

1. Wazuh agent is used to collect log data from various sources on the monitored systems.
2. Wazuh agent sends the collected log data to the Wazuh manager, which acts as a centralized log collection and analysis hub.
3. The Wazuh manager decodes and analyzes the incoming log data and uses Filebeat to pass the results along to the Wazuh indexer (Elasticsearch) for indexing and storage.
4. Wazuh indexer (Elasticsearch) indexes the log data, allowing for quick and efficient searching and analysis of the data using Wazuh Dashboard (Kibana).


### XDR

The Wazuh Extended Detection and Response (XDR) platform provides a comprehensive security solution that detects, analyzes, and responds to threats across multiple IT infrastructure layers. Wazuh collects telemetry from endpoints, network devices, cloud workloads, third-party APIs, and other sources for unified security monitoring and protection.

#### Capabilities

- **Threat hunting**: Focus the attention of your analysts and cut the time spent analyzing telemetry from multiple security platforms. Wazuh maps detected events to the relevant adversary tactics and techniques. It also ingests third-party threat intelligence data and allows you to create custom queries to filter events and aid threat hunting.
- **Behavioral analysis**: Detect and respond to threats based on unusual behavior patterns. The Wazuh behavioral analysis capabilities involve using advanced analytics to identify deviations from normal behavior, which may indicate potential security threats. These capabilities include monitoring file integrity, network traffic, user behavior, and anomalies in system performance metrics.
- **Automated response**: Reduce the average response time to incidents with the Wazuh active response module. Wazuh automatically responds to threats to mitigate the potential impact on your infrastructure. You can use the built-in response actions or create custom actions according to your incident response plan.
- **Cloud workload protection**: Provide security coverage for your cloud workloads and containers. Wazuh has built-in integration with cloud services to collect and analyze telemetry.
It protects native and hybrid cloud environments including container infrastructure by detecting and responding to current and emerging threats.
- **Threat intelligence**: Wazuh incorporates threat intelligence feeds to detect and respond to known threats. It integrates with threat intelligence sources, including open source intelligence (OSINT), commercial feeds, and user-contributed data to provide up-to-date information on potential threats.
- **Compliance and reporting**: Meet regulatory compliance requirements, generate reports, and demonstrate the effectiveness of your security program. Wazuh performs regulatory compliance checks against regulations and security standards, such as PCI-DSS, HIPAA, GDPR, and more.

#### Features

- **Universal agent for endpoint protection**: Deploy the Wazuh agent on your endpoints to detect and respond to cyber threats. The Wazuh agent runs on the most common operating systems to detect malware, perform file integrity monitoring, read endpoint telemetry, perform vulnerability assessment, scan system configuration, and automatically respond to threats.
- **Integration with third-party solutions**: Wazuh extends its threat detection capability by integrating third-party solutions, and unifying telemetry from various sources to consolidate real-time log data. It ingests telemetry via syslog or APIs from third-party applications, devices, and workloads like cloud providers and SaaS vendors.
- **Open source**: Wazuh offers several advantages as an open source XDR platform. It is customizable and can be modified to meet specific needs, giving greater flexibility and control over your environment. It has a large community of users and developers who provide support and expertise. Furthermore, it integrates with a broad range of security solutions, allowing you to create a comprehensive security ecosystem.

### SIEM

The Wazuh Security Information and Event Management (SIEM) solution is a centralized platform for aggregating and analyzing telemetry in real time for threat detection and compliance. Wazuh collects event data from various sources like endpoints, network devices, cloud workloads, and applications for broader security coverage.

#### Capabilities

- **Security log analysis**: Protect your infrastructure and meet regulatory compliance by monitoring and auditing endpoint activity. Wazuh aggregates, stores, and analyzes security event data to identify anomalies or indicators of compromise. The SIEM platform adds contextual information to alerts to expedite investigations and reduce average response time.
- **Vulnerability detection**: Detect vulnerabilities on monitored endpoints where you deploy the Wazuh agent. Wazuh prioritizes identified vulnerabilities to speed up your decision-making and remediation process. The Wazuh vulnerability detection capability ensures you meet regulatory compliance requirements while reducing your attack surface.
- **Security Configuration Assessment**: Leverage the Wazuh SCA capability to identify misconfigurations and security flaws in your infrastructure. Wazuh scans your systems against the Center for Internet Security (CIS) benchmark to allow you to identify and remediate vulnerabilities, misconfigurations, or deviations from best practices and security standards.
- **Regulatory compliance**: Simplify the process of meeting regulatory compliance requirements by using Wazuh. Wazuh helps you track and demonstrate compliance with various regulatory frameworks such as PCI DSS, NIST 800-53, GDPR, TSC SOC2, and HIPAA.

#### Features

- **Alerting and notification**: Receive real-time alerts and notifications when security incidents occur. Wazuh correlates events from multiple sources, integrates threat intelligence feeds, and provides customizable dashboards and reports. You can customize alerts to meet specific requirements. This allows security teams to respond quickly to threats and minimize the impact of security incidents.
- **Reporting insights from SIEM events**: Generate insightful reports that provide high-level analysis of security events. Wazuh allows you to generate comprehensive, actionable information that meets your unique needs. You can use Wazuh reports to demonstrate compliance with various regulations and standards.

<details>
	<summary>
		<b>39. Malaquias</b>
	</summary>
	<span style="color:gray">
		<b>Autor:</b> Malaquias (século V a.C.)<br>
		<b>Período narrado:</b> Século V a.C.<br>
		O livro de Malaquias da Bíblia é o último livro do Antigo Testamento e faz parte dos profetas menores. Ele é atribuído a um profeta chamado Malaquias, cujo nome significa "meu mensageiro" em hebraico.<br><br>
		O livro de Malaquias contém uma série de profecias e repreensões do Senhor dirigidas ao povo de Israel, especialmente aos sacerdotes e líderes religiosos, por sua infidelidade, injustiça e falta de temor a Deus. Malaquias fala sobre questões como a falta de reverência no culto a Deus, o divórcio e a infidelidade do povo, a oferta de sacrifícios impuros e a vinda do Messias.<br><br>
		No final do livro, Malaquias anuncia a vinda de um mensageiro que prepararia o caminho para o Senhor, identificado pelos cristãos como João Batista, e profetiza sobre o grande e terrível dia do Senhor, que traria juízo e salvação. Em resumo, o livro de Malaquias fala sobre o chamado ao arrependimento e à renovação espiritual do povo de Israel, além de apontar para a chegada do Messias.
	</span>
</details>
